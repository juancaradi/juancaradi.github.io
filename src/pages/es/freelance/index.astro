---
import Layout from '../../../layouts/Layout.astro';
import FreelanceTimeline from '../../../components/FreelanceTimeline.astro';
import FreelanceDashboard from '../../../components/FreelanceDashboard.astro';
import { ui } from '../../../i18n/ui';

const lang = 'es';
const t = ui.es;
---

<Layout title="Bitácora Freelance | Camilo Ramírez" lang="es">
  <div class="page-container">
    <header class="page-header">
      <h1 class="page-title">
        {t.freelanceTitlePre} <span class="gradient-text">{t.freelanceTitleGradient}</span>
      </h1>
      <p class="page-subtitle">{t.freelanceSubtitle}</p>

      {/* 🎛️ SELECTOR DE AÑO */}
      <div class="year-selector">
        <button id="btn-2026" class="year-btn active" onclick="switchYear('2026')">2026</button>
        <button id="btn-2025" class="year-btn" onclick="switchYear('2025')">2025</button>
      </div>
    </header>

    {/* 📺 VISTA 2026: TIMELINE */}
    <div id="view-2026" class="year-view">
      <FreelanceTimeline lang="es" year={2026} />
    </div>

    {/* 📊 VISTA 2025: DASHBOARD */}
    <div id="view-2025" class="year-view hidden">
      <FreelanceDashboard year={2025} lang="es" />
    </div>

  </div>
</Layout>

<script is:inline>
  function switchYear(year) {
    document.querySelectorAll('.year-view').forEach(el => el.classList.add('hidden'));
    document.querySelectorAll('.year-btn').forEach(el => el.classList.remove('active'));
    document.getElementById(`view-${year}`).classList.remove('hidden');
    document.getElementById(`btn-${year}`).classList.add('active');
  }
</script>

<style>
  .page-container { max-width: 900px; margin: 0 auto; padding: 40px 20px; }
  .page-header { text-align: center; margin-bottom: 40px; }
  .page-title { font-size: 2.5rem; font-weight: 800; margin-bottom: 16px; color: var(--text); }
  .gradient-text { background: linear-gradient(135deg, var(--link) 0%, #a855f7 50%, #ec4899 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
  .page-subtitle { font-size: 1.15rem; color: var(--muted); max-width: 700px; margin: 0 auto; line-height: 1.6; }

  .year-selector { display: inline-flex; background: var(--code-bg); padding: 5px; border-radius: 12px; margin-top: 30px; border: 1px solid var(--border); }
  .year-btn { background: transparent; border: none; padding: 8px 24px; border-radius: 8px; color: var(--muted); font-weight: 600; cursor: pointer; transition: all 0.3s; }
  .year-btn:hover { color: var(--text); }
  .year-btn.active { background: var(--link); color: white; shadow: 0 4px 12px rgba(59, 130, 246, 0.3); }

  .hidden { display: none; }
  .year-view { animation: fadeIn 0.4s ease; }
  @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
</style>