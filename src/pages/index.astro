---
// Redirección raíz: decide idioma del navegador.
// ✅ Mejor: JS + fallback <noscript>.
---

<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Redireccionando...</title>
    <meta name="robots" content="noindex" />

    <script is:inline>
      (() => {
        // Fondo consistente mientras redirige (evita flash)
        const html = document.documentElement;

        let saved = null;
        try { saved = localStorage.getItem("theme"); } catch (_) {}

        const prefersDark = window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)").matches;
        const theme = (saved === "dark" || (!saved && prefersDark)) ? "dark" : "light";

        html.style.backgroundColor = theme === "dark" ? "#232323" : "#ffffff";

        // Idioma
        const browserLang = navigator.language || 'es';
        const targetPath = browserLang.startsWith('en') ? '/en/' : '/es/';

        window.location.replace(targetPath);
      })();
    </script>

    <noscript>
      <meta http-equiv="refresh" content="0;url=/es/" />
    </noscript>

    <style>
      html, body {
        background-color: #232323;
        color: #232323;
      }
      @media (prefers-color-scheme: light) {
        html, body { background-color: #ffffff; color: #ffffff; }
      }
    </style>
  </head>
  <body></body>
</html>
